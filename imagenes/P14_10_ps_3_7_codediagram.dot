digraph P14_10_ps_3_7_Flowchart {
    // Configuracion general del grafo
    rankdir=TB;
    node [fontname="Helvetica", fontsize=10];
    edge [fontname="Helvetica", fontsize=9];

    // Definicion de estilos de nodos
    node [shape=ellipse, style=filled, fillcolor="#c8e6c9"]; // Inicio/Fin
    start [label="INICIO"];
    end [label="FIN"];

    node [shape=box, style=filled, fillcolor="#bbdefb"]; // Proceso
    declare_vars [label="DECLARAR\nScanner scanner\ndouble totalNomina = 0"];
    declare_loop_vars [label="DECLARAR\ndouble sueldoActual\ndouble nuevoSueldo"];
    calc_aumento_10 [label="nuevoSueldo = sueldoActual * 1.10"];
    calc_aumento_7 [label="nuevoSueldo = sueldoActual * 1.07"];
    calc_aumento_8 [label="nuevoSueldo = sueldoActual * 1.08"];
    update_nomina [label="totalNomina += nuevoSueldo"];
    close_scanner [label="Cerrar Scanner"];
    
    // Usamos un nodo de "conector" para el bucle
    node [shape=circle, label="", width=0.3, style=filled, fillcolor=gray];
    loop_connector_start;
    loop_connector_end;

    node [shape=parallelogram, style=filled, fillcolor="#fff9c4"]; // Entrada/Salida
    prompt_n [label="IMPRIMIR \"Introduce el numero de empleados:\""];
    read_n [label="LEER n"];
    prompt_sueldo [label="IMPRIMIR \"Sueldo del empleado #[i+1]:\""];
    read_sueldo [label="LEER sueldoActual"];
    print_nuevo_sueldo [label="IMPRIMIR \"Nuevo sueldo: $%.2f\""];
    print_no_empleados [label="IMPRIMIR \"No hay empleados para procesar.\""];
    print_total_nomina [label="IMPRIMIR \"Total de la nueva nomina es: $%.2f\""];

    node [shape=diamond, style=filled, fillcolor="#ffe0b2", aspect=1.5]; // Decision
    decision_n_gt_0 [label="n > 0"];
    loop_condition [label="i < n"];
    decision_rango1 [label="sueldoActual < 10000"];
    decision_rango2 [label="sueldoActual <= 25000"];

    // Conexiones (flujo)
    start -> declare_vars -> prompt_n -> read_n -> decision_n_gt_0;
    
    decision_n_gt_0 -> loop_connector_start [label="Si"];
    decision_n_gt_0 -> print_no_empleados [label="No"];
    
    loop_connector_start -> loop_condition;
    
    loop_condition -> prompt_sueldo [label="Si"];
    prompt_sueldo -> read_sueldo -> declare_loop_vars -> decision_rango1;
    
    decision_rango1 -> calc_aumento_10 [label="Si"];
    decision_rango1 -> decision_rango2 [label="No"];
    
    decision_rango2 -> calc_aumento_7 [label="Si"];
    decision_rango2 -> calc_aumento_8 [label="No"];
    
    // Punto de union despues de las condiciones de sueldo
    subgraph cluster_merge {
        style=invis;
        calc_aumento_10 -> loop_connector_end;
        calc_aumento_7 -> loop_connector_end;
        calc_aumento_8 -> loop_connector_end;
    }
    
    loop_connector_end -> print_nuevo_sueldo -> update_nomina -> loop_connector_start;

    loop_condition -> print_total_nomina [label="No (Fin del bucle)"];
    
    print_total_nomina -> close_scanner;
    print_no_empleados -> close_scanner;
    
    close_scanner -> end;
}